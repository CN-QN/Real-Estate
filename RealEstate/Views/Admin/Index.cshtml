@{
    Layout = "~/Views/Shared/_Layout_Admin.cshtml";
}

<h3 class="mb-4">Tổng quan hệ thống</h3>

<!-- ====== THỐNG KÊ NHANH ====== -->
<div class="row g-3 mb-4">
    <div class="col-md-3">
        <div class="card text-bg-primary shadow-sm">
            <div class="card-body">
                <h6 class="card-title"><i class="fa-solid fa-building"></i> Tổng tin đăng</h6>
                <h3 class="fw-bold">1,248</h3>
                <p class="mb-0">+12% so với tháng trước</p>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-bg-success shadow-sm">
            <div class="card-body">
                <h6 class="card-title"><i class="fa-solid fa-users"></i> Người dùng</h6>
                <h3 class="fw-bold">534</h3>
                <p class="mb-0">+5% so với tháng trước</p>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-bg-warning shadow-sm">
            <div class="card-body">
                <h6 class="card-title"><i class="fa-solid fa-clock"></i> Tin chờ duyệt</h6>
                <h3 class="fw-bold">37</h3>
                <p class="mb-0">Đang xử lý</p>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-bg-danger shadow-sm">
            <div class="card-body">
                <h6 class="card-title"><i class="fa-solid fa-flag"></i> Báo cáo vi phạm</h6>
                <h3 class="fw-bold">12</h3>
                <p class="mb-0">Cần xem xét</p>
            </div>
        </div>
    </div>
</div>

<!-- ====== BIỂU ĐỒ ====== -->
<div class="row g-3">
    <div class="col-md-8">
        <div class="card shadow-sm">
            <div class="card-header bg-light fw-bold">
                <i class="fa-solid fa-chart-line"></i> Lượt tin đăng theo tháng
            </div>
            <div class="card-body">
                <canvas id="chartTinDang"></canvas>
            </div>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card shadow-sm">
            <div class="card-header bg-light fw-bold">
                <i class="fa-solid fa-pie-chart"></i> Tỷ lệ loại tin
            </div>
            <div class="card-body">
                <canvas id="chartLoaiTin"></canvas>
            </div>
        </div>
    </div>
</div>

<!-- ====== BẢNG GẦN ĐÂY ====== -->
<div class="card shadow-sm mt-4">
    <div class="card-header bg-light fw-bold">
        <i class="fa-solid fa-newspaper"></i> Tin đăng gần đây
    </div>
    <div class="card-body p-0">
        <table class="table table-hover align-middle mb-0">
            <thead class="table-light">
                <tr>
                    <th>#</th>
                    <th>Tiêu đề</th>
                    <th>Người đăng</th>
                    <th>Ngày đăng</th>
                    <th>Trạng thái</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1</td>
                    <td>Bán nhà phố Quận 7</td>
                    <td>Nguyễn Văn A</td>
                    <td>21/10/2025</td>
                    <td><span class="badge bg-success">Đã duyệt</span></td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Căn hộ Vinhomes Grand Park</td>
                    <td>Trần Thị B</td>
                    <td>20/10/2025</td>
                    <td><span class="badge bg-warning text-dark">Chờ duyệt</span></td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>Đất nền Quận 9, SHR</td>
                    <td>Lê Văn C</td>
                    <td>19/10/2025</td>
                    <td><span class="badge bg-success">Đã duyệt</span></td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

@section scripts {
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // ====== Biểu đồ cột: Tin đăng theo tháng ======
        const ctx1 = document.getElementById('chartTinDang');
        new Chart(ctx1, {
            type: 'bar',
            data: {
                labels: ['Tháng 1', 'Tháng 2', 'Tháng 3', 'Tháng 4', 'Tháng 5', 'Tháng 6', 'Tháng 7', 'Tháng 8', 'Tháng 9', 'Tháng 10'],
                datasets: [{
                    label: 'Số tin đăng',
                    data: [120, 150, 180, 200, 230, 190, 250, 300, 280, 350],
                    backgroundColor: '#0d6efd',
                    borderRadius: 6
                }]
            },
            options: {
                scales: {
                    y: { beginAtZero: true, ticks: { stepSize: 50 } }
                }
            }
        });

        // ====== Biểu đồ tròn: Loại tin ======
        const ctx2 = document.getElementById('chartLoaiTin');
        new Chart(ctx2, {
            type: 'doughnut',
            data: {
                labels: ['Bán nhà', 'Cho thuê', 'Dự án', 'Đất nền'],
                datasets: [{
                    data: [45, 25, 15, 15],
                    backgroundColor: ['#0d6efd', '#198754', '#ffc107', '#dc3545']
                }]
            },
            options: {
                plugins: {
                    legend: { position: 'bottom' }
                }
            }
        });
    </script>

}
